<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Adding "maximum-scale=1" fixes the Mobile Safari auto-zoom bug: http://filamentgroup.com/examples/iosScaleBug/ -->

  <title>Berkeley Scavanger Hunt</title>
  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="style/main.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script type="text/javascript">
      $(document).ready(function() {
       
      //if submit button is clicked
      $('#submit').click(function () {        
           
          //Get the data from all the fields
          var trailname = $('input[name=trailname]');
          var errorbox = $('.error-box');
          console.log(trailname);
   
          //Simple validation to make sure user entered something
          //If error found, add hightlight class to the text field
          if (trailname.val()=='') {
              errorbox.addClass('error');
              return false;
          } else errorbox.removeClass('error');
           
           
          //organize the data properly
          var data = 'trailname=' + trailname.val();
           
          //disabled all the text fields
          $('.text').attr('disabled','true');
           
          //show the loading sign
          $('.loading').show();
           
          //start the ajax
          $.ajax({
              //this is the php file that processes the data returns the list
              url: "#.php", 
               
              //GET method is used
              type: "GET",
   
              //pass the data         
              data: data,     
              cache: false,
               
              //success
              success: function (html) {              
                  //if #.php returned true (display trail-list)
                  if (html==1) {                  
                      //hide the trail-form
                      $('.trail-form').fadeOut('slow');                 
                       
                      //show the trail-list
                      $('.trail-list-container').fadeIn('slow');
                       
                  //if #.php returned false
                  } else alert('Sorry, unexpected error. Please try again.');               
              }       
          });
           
          //don't reload page
          return false;
      }); 
  }); 
</script>
  <script type="text/javascript">
    $(function() {
       if (navigator.geolocation) { // progressive enhancement, check that the functionality exists first
           $('#geolocation').show();

           $('#geolocate').click(function() {
               $('#map').show();

               // navigator.geolocation.getCurrentPosition(success, error, options);
               navigator.geolocation.getCurrentPosition(function(position) {
                    console.log(position);

                   var latLng = new google.maps.LatLng(position.coords.latitude,
                                                       position.coords.longitude);

                   var map = new google.maps.Map($('#map').get(0), {
                       zoom: 15,
                       center: latLng,
                       mapTypeId: google.maps.MapTypeId.ROADMAP
                   });

                   var marker = new google.maps.Marker({
                       position: latLng,
                       map: map
                   });
               }, function(error) {
                   $('#map').text(error.message);
               });

               return false;
           });
       }
    });
  </script>

</head>
<body>
  <div class="container">

    <div class="trail-form bg">
      <h1>Berkeley Scavanger Hunt</h1>
      <div class="error-box"><p>Please enter a Trail Name.</p></div>
      <form id="trailname-form" method="post" action="#.php">
          <input name="trailname" id="trailname" type="text" placeholder="Trail Name">
          <button name="submit" id="submit" type="submit" value="Submit" class="btn primary submit">Submit</button>
      </form>
    </div>

    <div class="trail-list-container bg">
      <h1>Get to Finding Places</h1>
      <div class="completed-counter"><span>5</span> Completed Trails</div>
      <ol class="rectangle-list">
        <li><a href="">List item</a></li>
        <li><a href="">List item</a></li>
        <li><a href="">List item</a></li>
        <li><a href="">List item</a></li>
        <li><a href="">List item</a></li>           
      </ol>
    </div>

    <div class="list-contents-container bg">
      <ol class="rectangle-list">
        <li><a href="">List item</a></li>          
      </ol>

      <div id="geolocation" style="display: none;">
          <button name="geolocate" id="geolocate" type="submit" value="Locate Me" class="btn primary submit">Locate Me</button>
          <div id="map"></div>
      </div>

      <form id="checkin-form" method="post" action="#.php">
          <button name="checkin" id="checkin" type="submit" value="checkin" class="btn primary submit">Check In</button>
          <button name="cancel" id="cancel" type="submit" value="cancel" class="btn">Cancel</button>
      </form>
    </div>

    <div class="leaderboard-container">

      <div class="top-bg bg">
        <h1>Berkeley Scavanger Hunt</h1>
      </div>

      <h2 class="ribbon">
        <strong class="ribbon-content"> An Awesome Leaderboard</strong>
      </h2>

      <div class="btm-bg bg">
        <h2>The best scavangers in Berkeley deserve some recognition.</h2>
        <hr class="soften">

        <ol id="accordion" class="rectangle-list">
          <li><a href="">List item <span>Time</span></a></li>
            <ul>
              <li>Golf<span>Time</span></li>
              <li>Cricket</li>
              <li>Football</li>
            </ul>

          <li><a href="">List item <span>Time</span></a></li>
            <ul>
              <li>Golf<span>Time</span></li>
              <li>Cricket</li>
              <li>Football</li>
            </ul>
            
          <li><a href="">List item <span>Time</span></a></li>
          <li><a href="">List item <span>Time</span></a></li>
          <li><a href="">List item <span>Time</span></a></li>           
        </ol>
      </div>

    </div>
  </div>
<script type="text/javascript">
  $("#accordion > li").click(function(){

  if(false == $(this).next().is(':visible')) {
    $('#accordion > ul').slideUp(300);
  }
  $(this).next().slideToggle(300);
  return false;
  });
</script>
</body>

</html>